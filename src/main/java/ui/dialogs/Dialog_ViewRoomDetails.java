/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JPanel.java to edit this template
 */
package ui.dialogs;

import dao.RoomDAOImpl;
import entities.Room;
import interfaces.RoomDAO;
import lombok.SneakyThrows;

import javax.swing.*;
import java.awt.*;
import java.rmi.RemoteException;

/**
 *
 * @author TRAN LONG VU
 */
public class Dialog_ViewRoomDetails extends JPanel {
    private String roomID;
    private Room room;
    RoomDAO roomDAO = new RoomDAOImpl();
    /**
     * Creates new form Dialog_ViewRoomDetails
     */
    public Dialog_ViewRoomDetails(String roomID) throws RemoteException {
        this.roomID = roomID;
        initComponents();
        initRoomDetailByID();
    }

    public void setRoom(Room room) {
        this.room = room;
    }

    public Room getRoom() {
        return room;
    }

    @SneakyThrows
    private void initRoomDetailByID() {
        Room roomInfor = roomDAO.findById(roomID);
        if (room != null) {
            lbl_RoomID_Value.setText(roomInfor.getRoomId());
            lbl_TypeRoom_Value.setText(roomInfor.getRoomType().getTypeName());
            lbl_Price_Value.setText(String.format("%,.0f", roomInfor.getPrice()) + " VNĐ");
            lbl_Capacity_Value.setText(roomInfor.getCapacity() + " người/phòng");
            lbl_RoomSize_Value.setText(roomInfor.getRoomSize() + " m2");
            lbl_Status_Value.setText(roomInfor.getStatus() == 1 ? "Trống" : "Đã thuê");
            lbl_Amenities_Value.setText(String.join(", ", roomInfor.getAmenities()));
        }
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        pnl_ImageRoom = new JPanel();
        lbl_ImageRoom = new JLabel();
        pnl_Infor = new JPanel();
        pnl_Left = new JPanel();
        lbl_RoomID = new JLabel();
        lbl_TypeRoom = new JLabel();
        lbl_Price = new JLabel();
        lbl_Capacity = new JLabel();
        lbl_RoomSize = new JLabel();
        lbl_Status = new JLabel();
        lbl_Amenities = new JLabel();
        pnl_Right = new JPanel();
        lbl_RoomID_Value = new JLabel();
        lbl_TypeRoom_Value = new JLabel();
        lbl_Price_Value = new JLabel();
        lbl_Capacity_Value = new JLabel();
        lbl_RoomSize_Value = new JLabel();
        lbl_Status_Value = new JLabel();
        lbl_Amenities_Value = new JLabel();
        jPanel5 = new JPanel();
        btn_Cancel = new ui.components.button.ButtonCancelCustom();
        btn_AddEntityRoom = new ui.components.button.ButtonCustom();

        setBackground(new Color(255, 255, 255));

        pnl_ImageRoom.setBackground(new Color(255, 255, 255));
        pnl_ImageRoom.setLayout(new BorderLayout());
        pnl_ImageRoom.add(lbl_ImageRoom, BorderLayout.CENTER);

        pnl_Infor.setBackground(new Color(255, 255, 255));

        pnl_Left.setBackground(new Color(255, 255, 255));
        pnl_Left.setLayout(new GridLayout(7, 1));

        lbl_RoomID.setFont(new Font("Segoe UI", 0, 15)); // NOI18N
        lbl_RoomID.setText("Số phòng:");
        pnl_Left.add(lbl_RoomID);

        lbl_TypeRoom.setFont(new Font("Segoe UI", 0, 15)); // NOI18N
        lbl_TypeRoom.setText("Loại phòng:");
        pnl_Left.add(lbl_TypeRoom);

        lbl_Price.setFont(new Font("Segoe UI", 0, 15)); // NOI18N
        lbl_Price.setText("Giá/đêm:");
        pnl_Left.add(lbl_Price);

        lbl_Capacity.setFont(new Font("Segoe UI", 0, 15)); // NOI18N
        lbl_Capacity.setText("Sức chứa:");
        pnl_Left.add(lbl_Capacity);

        lbl_RoomSize.setFont(new Font("Segoe UI", 0, 15)); // NOI18N
        lbl_RoomSize.setText("Kích thước phòng:");
        pnl_Left.add(lbl_RoomSize);

        lbl_Status.setFont(new Font("Segoe UI", 0, 15)); // NOI18N
        lbl_Status.setText("Trạng thái:");
        pnl_Left.add(lbl_Status);

        lbl_Amenities.setFont(new Font("Segoe UI", 0, 15)); // NOI18N
        lbl_Amenities.setText("Tiện nghi:");
        pnl_Left.add(lbl_Amenities);

        pnl_Right.setBackground(new Color(255, 255, 255));
        pnl_Right.setLayout(new GridLayout(7, 1));

        lbl_RoomID_Value.setFont(new Font("Segoe UI", 1, 15)); // NOI18N
        pnl_Right.add(lbl_RoomID_Value);

        lbl_TypeRoom_Value.setFont(new Font("Segoe UI", 0, 15)); // NOI18N
        pnl_Right.add(lbl_TypeRoom_Value);

        lbl_Price_Value.setFont(new Font("Segoe UI", 1, 15)); // NOI18N
        lbl_Price_Value.setForeground(new Color(255, 0, 51));
        pnl_Right.add(lbl_Price_Value);

        lbl_Capacity_Value.setFont(new Font("Segoe UI", 0, 15)); // NOI18N
        pnl_Right.add(lbl_Capacity_Value);

        lbl_RoomSize_Value.setFont(new Font("Segoe UI", 0, 15)); // NOI18N
        pnl_Right.add(lbl_RoomSize_Value);

        lbl_Status_Value.setFont(new Font("Segoe UI", 0, 15)); // NOI18N
        pnl_Right.add(lbl_Status_Value);

        lbl_Amenities_Value.setFont(new Font("Segoe UI", 0, 15)); // NOI18N
        pnl_Right.add(lbl_Amenities_Value);

        GroupLayout pnl_InforLayout = new GroupLayout(pnl_Infor);
        pnl_Infor.setLayout(pnl_InforLayout);
        pnl_InforLayout.setHorizontalGroup(
            pnl_InforLayout.createParallelGroup(GroupLayout.Alignment.LEADING)
            .addGroup(pnl_InforLayout.createSequentialGroup()
                .addComponent(pnl_Left, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(pnl_Right, GroupLayout.PREFERRED_SIZE, 230, GroupLayout.PREFERRED_SIZE))
        );
        pnl_InforLayout.setVerticalGroup(
            pnl_InforLayout.createParallelGroup(GroupLayout.Alignment.LEADING)
            .addComponent(pnl_Left, GroupLayout.DEFAULT_SIZE, 383, Short.MAX_VALUE)
            .addComponent(pnl_Right, GroupLayout.DEFAULT_SIZE, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );

        jPanel5.setBackground(new Color(255, 255, 255));

        btn_Cancel.setText("Thoát");
        btn_Cancel.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn_CancelActionPerformed(evt);
            }
        });

        btn_AddEntityRoom.setText("Thêm");
        btn_AddEntityRoom.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn_AddEntityRoomActionPerformed(evt);
            }
        });

        GroupLayout jPanel5Layout = new GroupLayout(jPanel5);
        jPanel5.setLayout(jPanel5Layout);
        jPanel5Layout.setHorizontalGroup(
            jPanel5Layout.createParallelGroup(GroupLayout.Alignment.LEADING)
            .addGroup(jPanel5Layout.createSequentialGroup()
                .addGap(29, 29, 29)
                .addComponent(btn_Cancel, GroupLayout.PREFERRED_SIZE, 130, GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(btn_AddEntityRoom, GroupLayout.PREFERRED_SIZE, 136, GroupLayout.PREFERRED_SIZE)
                .addGap(21, 21, 21))
        );
        jPanel5Layout.setVerticalGroup(
            jPanel5Layout.createParallelGroup(GroupLayout.Alignment.LEADING)
            .addGroup(jPanel5Layout.createSequentialGroup()
                .addGap(15, 15, 15)
                .addGroup(jPanel5Layout.createParallelGroup(GroupLayout.Alignment.BASELINE)
                    .addComponent(btn_Cancel, GroupLayout.PREFERRED_SIZE, 42, GroupLayout.PREFERRED_SIZE)
                    .addComponent(btn_AddEntityRoom, GroupLayout.PREFERRED_SIZE, 42, GroupLayout.PREFERRED_SIZE))
                .addContainerGap(11, Short.MAX_VALUE))
        );

        GroupLayout layout = new GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(pnl_ImageRoom, GroupLayout.PREFERRED_SIZE, 402, GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(GroupLayout.Alignment.LEADING)
                    .addComponent(pnl_Infor, GroupLayout.DEFAULT_SIZE, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jPanel5, GroupLayout.DEFAULT_SIZE, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addContainerGap())))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(GroupLayout.Alignment.TRAILING, false)
                    .addGroup(GroupLayout.Alignment.LEADING, layout.createSequentialGroup()
                        .addContainerGap()
                        .addComponent(pnl_ImageRoom, GroupLayout.DEFAULT_SIZE, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(pnl_Infor, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                        .addGap(18, 18, 18)
                        .addComponent(jPanel5, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)))
                .addContainerGap(GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
    }// </editor-fold>//GEN-END:initComponents

    private void btn_AddEntityRoomActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn_AddEntityRoomActionPerformed
        addToCart();
    }//GEN-LAST:event_btn_AddEntityRoomActionPerformed

    private void btn_CancelActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn_CancelActionPerformed
        cancel();
    }//GEN-LAST:event_btn_CancelActionPerformed


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private ui.components.button.ButtonCustom btn_AddEntityRoom;
    private ui.components.button.ButtonCancelCustom btn_Cancel;
    private JPanel jPanel5;
    private JLabel lbl_Amenities;
    private JLabel lbl_Amenities_Value;
    private JLabel lbl_Capacity;
    private JLabel lbl_Capacity_Value;
    private JLabel lbl_ImageRoom;
    private JLabel lbl_Price;
    private JLabel lbl_Price_Value;
    private JLabel lbl_RoomID;
    private JLabel lbl_RoomID_Value;
    private JLabel lbl_RoomSize;
    private JLabel lbl_RoomSize_Value;
    private JLabel lbl_Status;
    private JLabel lbl_Status_Value;
    private JLabel lbl_TypeRoom;
    private JLabel lbl_TypeRoom_Value;
    private JPanel pnl_ImageRoom;
    private JPanel pnl_Infor;
    private JPanel pnl_Left;
    private JPanel pnl_Right;
    // End of variables declaration//GEN-END:variables

    @SneakyThrows
    private void addToCart() {
        Room roomInfor = roomDAO.findById(roomID);
        setRoom(roomInfor);
        Window window = SwingUtilities.getWindowAncestor(this);
        window.dispose();
    }

    private void cancel() {
        Window window = SwingUtilities.getWindowAncestor(this);
        window.dispose();
    }
}
